<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://code.jquery.com/jquery-3.3.1.js"
        integrity="sha256-2Kok7MbOyxpgUVvAk/HJ2jigOSYS2auK4Pfzbm7uH60=" crossorigin="anonymous">
        </script>
    <!-- <script src="/insert.js" type="text/javascript"></script> -->
    <script src="/mispagos.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
        crossorigin="anonymous"></script>
    <link href="/mispagos.css" rel="stylesheet" type="text/css" media="all">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <%- include('./shared/head'); -%>
</head>

<body>
    <header id="headerArea">
        <%- include('./shared/nav'); -%>
    </header>
    <div id="container">
        <main id="mainCont">
            <div class="side">
                <div>
                    <p class="menTi">Resumen del pedido</p>
                    <div id="productos">
                        <% for (var i=0; i < carrito.length; i++) { %>
                            <div class="producto">
                                <% if (carrito[i].nombre.length> 17) { %>
                                    <b>
                                        <%= carrito[i].nombre.substring(0,15) + "..." %>
                                    </b>
                                <%} else { %>
                                    <b>
                                        <%= carrito[i].nombre %>
                                    </b>
                                    <% } %>
                                <p>
                                    <%= carrito[i].precio_total.toLocaleString("en", {style: "currency" ,currency: "MXN"
                                        }); %>
                                </p>
                            </div>
                        <% } %>
                    </div>
                    <div class="total">
                        <b>Total</b>
                        <p>
                            <%= precioTotal.toLocaleString("en", {style: "currency" ,currency: "MXN" }); %>
                        </p>
                    </div>
                </div>
                <div class="foot">
                    <img src="/logo.svg" width="100px" alt="">
                </div>
            </div>
            <div class="contGran">
                <div class="envioNav">
                    <ul>
                        <li id="dir" style="cursor:pointer;" class="navCont active" onclick="abrirContNav(event, 'direccion')">
                            <p>Dirección de envío</p>
                        </li>
                        <li id="pag" style="cursor:pointer;" class="navCont" onclick="abrirContNav(event, 'pago')">
                            <p>Forma de pago</p>
                        </li>
                        <li id="con" style="cursor:pointer;" class="navCont">
                            <p>Confirmación</p>
                        </li>
                    </ul>
                </div>

                <!--DIRECCION-->

                <div class="opEnvio" id="direccion" style="display: block;">
                    <div class="opText">
                        <% if (direccionActiva != null) { %>
                            <div class="contenido">
                                <b>Dirección</b>
                            </div>
                            <div id="dirSelecc" class="contenido">
                                <p>
                                    <%= direccionActiva.direccion %>
                                </p>
                            </div>
                            <div class="contenido">
                                <a class="link" style="cursor:pointer;" onclick="abrirCont(event, 'opDireccion')">Cambiar</a>
                            </div>
                        <% }else{ %>
                            <div class="contenido">
                                <b>¡No tienes una direcciones registrada!</b>
                            </div>
                            <div class="contenido">
                                <a class="link" style="cursor:pointer;" onclick="abrirCont(event, 'opDireccion')">Aquí quiero poner el botón de agregar una nueva dirección :(</a>
                            </div>
                        <% } %>
                    </div>
                    <div class="opText">
                        <% if (direccionActiva != null) { %>
                            <% if (direccionActiva.instrucciones) { %>
                                <div class="contenido">
                                    <b>Instrucciones de entrega</b>
                                    <p id="insEntrega">
                                        <%= direccionActiva.instrucciones %>
                                    </p>
                                </div>
                            <% } %>
                        <% } %>
                    </div>
                    <div class="opText">
                        <div class="contenido">
                            <select id="opEntrega">
                                <option selected>Normal / Express / Gratis</option>
                                <option value="normal">Normal</option>
                                <option value="express">Express</option>
                                <option value="gratis">Gratis</option>
                            </select>
                        </div>
                        <div class="contenido">
                            <button onclick="confirmarDat(event, 'dir', 'pag', 'pago')" id="aceptDir">Aceptar</button>
                        </div>
                    </div>
                </div>

                <!--OPCIONES DE DIRECCION-->

                <div class="opEnvio" id="opDireccion">
                    <div class="opText">
                        <% if (direcciones.length > 0) { %>
                            <% for (let i = 0; i < direcciones.length; i++) { %>
                                <form>
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="flexRadioDefault"
                                            id="flexRadioDefault1">
                                        <label class="form-check-label" for="flexRadioDefault1">
                                            <p><%= direcciones[i].direccion %></p>
                                            <p><%= direcciones[i].instrucciones_direccion %></p>
                                        </label>
                                    </div>
                                </form>
                            <% } %>
                        <% } %>
                        <!-- <div class="contenido">
                            <form>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="flexRadioDefault"
                                        id="flexRadioDefault1">
                                    <label class="form-check-label" for="flexRadioDefault1">
                                        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Maiores ea quaerat
                                            esse aut saepe quos, enim
                                            dicta rerum. Totam ipsum iusto quia reprehenderit quis asperiores modi!
                                            Sapiente nemo doloremque
                                            tempore.</p>
                                        <p>Ejemplo</p>
                                        <p>Ejemplo</p>
                                    </label>
                                </div>
                            </form>
                        </div> -->
                    </div>
                    <div class="opText">
                        <p> <img src="https://cdn-icons-png.flaticon.com/512/32/32563.png" alt="" height="10px"> <a
                                href="" data-bs-toggle="modal" data-bs-target="#nueDireccion">Agregar una nueva
                                dirección</a> </p>
                    </div>
                    <div class="opText">
                        <div class="contenido"></div>
                        <div class="contenido">
                            <button>Aceptar</button>
                        </div>
                    </div>
                </div>

                <!--PAGO-->

                <div class="opEnvio" id="pago">
                    <div class="opText">
                        <% if (metodopagoActivo != null) { %>
                            <div class="contenido">
                                <div class="opText">
                                    <div class="contenido">
                                        <b>Nombre en Tarjeta</b>
                                    </div>
                                    <div id="nomTar" class="contenido">
                                        <p><%= metodopagoActivo.nombre %></p>
                                    </div>
                                </div>
                                <div class="opText">
                                    <div class="contenido">
                                        <b>Numero de Tarjeta</b>
                                    </div>
                                    <div id="numTar" class="contenido">
                                        <p><%= metodopagoActivo.numTarjeta %></p>
                                    </div>
                                </div>
                                <div class="opText">
                                    <div class="contenido">
                                        <b>Vencimiento</b>
                                    </div>
                                    <div class="contenido">
                                        <p id="venc"><%= metodopagoActivo.fecha_vencimiento %></p>
                                    </div>
                                </div>
                            </div>
                            <div class="contenido">
                                <a class="link" style="cursor:pointer;" onclick="abrirCont(event, 'opPago')">Cambiar</a>
                            </div>
                        <% }else{ %>
                            <div class="contenido">
                                <b>¡No tienes métodos de pago registrados!</b>
                            </div>
                            <div class="contenido">
                                <a class="link" style="cursor:pointer;" onclick="abrirCont(event, 'opDireccion')">Aquí quiero poner el botón de agregar un nuevo método de pago :(</a>
                            </div>
                        <% } %>
                        <!-- <div class="contenido">
                            <div class="opText">
                                <div class="contenido">
                                    <b>Nombre en Tarjeta</b>
                                </div>
                                <div id="nomTar" class="contenido">
                                    <p>John Doe</p>
                                </div>
                            </div>
                            <div class="opText">
                                <div class="contenido">
                                    <b>Numero de Tarjeta</b>
                                </div>
                                <div id="numTar" class="contenido">
                                    <p>XXXX XXXX XXXX 4859</p>
                                </div>
                            </div>
                            <div class="opText">
                                <div class="contenido">
                                    <b>Vencimiento</b>
                                </div>
                                <div class="contenido">
                                    <p id="venc">12/22</p>
                                </div>
                            </div>
                            <div class="opText">
                                <div class="contenido">
                                    <b>Código de seguridad (CVV)</b>
                                </div>
                                <div class="contenido">
                                    <p id="cvv">911</p>
                                </div>
                            </div>
                        </div> -->
                    </div>
                    <div class="opText">
                        <div class="contenido">
                        </div>
                        <div class="contenido">
                            <button onclick="confirmarDat(event, 'pag', 'con', 'confirmacion')"
                                id="aceptPago">Aceptar</button>
                        </div>
                    </div>
                </div>

                <!--OPCIONES DE PAGO-->

                <div class="opEnvio" id="opPago">
                    <div class="opText">
                        <div class="contenido">
                            <form>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="flexRadioDefault"
                                        id="flexRadioDefault1">
                                    <label class="form-check-label" for="flexRadioDefault1">
                                        <p>John Doe</p>
                                        <p>XXXX XXXX XXXX 9859</p>
                                        <p>12/22</p>
                                    </label>
                                </div>
                            </form>
                        </div>
                    </div>
                    <div class="opText">
                        <p> <img src="https://cdn-icons-png.flaticon.com/512/32/32563.png" alt="" height="10px"> <a
                                href="" data-bs-toggle="modal" data-bs-target="#nueMetPag">Agregar nuevo metodo de
                                pago</a> </p>
                    </div>
                    <div class="opText">
                        <div class="contenido"></div>
                        <div class="contenido">
                            <button>Aceptar</button>
                        </div>
                    </div>


                </div>

                <!--CONFIRMAR-->

                <div class="opEnvio" id="confirmacion">
                    <div class="opText">
                        <div class="contenido">
                            <b>Dirección</b>
                        </div>
                        <div id="dirFin" class="contenido">

                        </div>
                    </div>
                    <div id="insEnDiv" class="opText">

                    </div>
                    <div class="opText">
                        <div class="contenido">
                            <b>Tipo de entrega</b>
                        </div>
                        <div id="opEnFin" class="contenido">

                        </div>
                    </div>
                    <div class="opText">
                        <div class="contenido">
                            <b>Nombre en Tarjeta</b>
                        </div>
                        <div id="nomTarFin" class="contenido">

                        </div>
                    </div>
                    <div class="opText">
                        <div class="contenido">
                            <b>Numero de Tarjeta</b>
                        </div>
                        <div id="numTarFin" class="contenido">

                        </div>
                    </div>
                    <div class="opText">
                        <div class="contenido">
                        </div>
                        <div class="contenido">
                            <button>Aceptar</button>
                        </div>
                    </div>
                </div>


            </div>



        </main>

        <!--NUEVA DIRECCION-->

        <div class="modal fade" id="nueDireccion" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
            aria-labelledby="staticBackdropLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h1 class="modal-title fs-5" id="staticBackdropLabel">Nueva dirección</h1>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <form>
                            <div class="mb-3">
                                <label for="nombre" class="form-label">Nombre completo:</label>
                                <input type="text" class="form-control" id="nombre" placeholder="John Doe">
                            </div>
                            <div class="mb-3">
                                <label for="callNum" class="form-label">Calle:</label>
                                <input type="text" class="form-control" id="callNum" placeholder="Calle venado">
                            </div>
                            <div class="mb-3">
                                <label for="callNum" class="form-label">Número:</label>
                                <input type="text" class="form-control" id="callNum" placeholder="99">
                            </div>
                            <div class="mb-3">
                                <label for="callNum" class="form-label">Colonia:</label>
                                <input type="text" class="form-control" id="callNum" placeholder="Tecnológica">
                            </div>
                            <div class="mb-3">
                                <label for="codigo" class="form-label">Código Postal:</label>
                                <input type="text" class="form-control" id="codigo" placeholder="12345">
                            </div>
                            <div class="mb-3">
                                <label for="numero" class="form-label">Ciudad:</label>
                                <input type="text" class="form-control" id="numero" placeholder="Hermosillo">
                            </div>
                            <div class="mb-3">
                                <label for="numero" class="form-label">Estado:</label>
                                <input type="text" class="form-control" id="numero" placeholder="Sonora">
                            </div>
                            <div class="mb-3">
                                <label for="insEnvio" class="form-label">Instrucciones de entrega:</label>
                                <textarea class="form-control" id="insEnvio" rows="2"></textarea>
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-primary">Agregar dirección</button>
                    </div>
                </div>
            </div>
        </div>

        <!--NUEVO PAGO-->

        <div class="modal fade" id="nueMetPag" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
            aria-labelledby="staticBackdropLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h1 class="modal-title fs-5" id="staticBackdropLabel">Nuevo método de pago</h1>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <form>
                            <div class="mb-3">
                                <label for="nombreTar" class="form-label">Nombre en tarjeta:</label>
                                <input type="text" class="form-control" id="nombreTar" placeholder="John Doe">
                            </div>
                            <div class="mb-3">
                                <label for="numTar" class="form-label">Número de tarjeta:</label>
                                <input type="text" class="form-control" id="numTar" placeholder="7777 8888 9999 5555">
                            </div>
                            <div class="mb-3">
                                <label for="venci" class="form-label">Fecha de vencimiento:</label>
                                <input type="text" class="form-control cort" id="venci" placeholder="12/22">
                            </div>
                            <div class="mb-3">
                                <label for="cvv" class="form-label">CVV:</label>
                                <input type="text" class="form-control cort" id="cvv" placeholder="911">
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-primary">Generar factura</button>
                    </div>
                </div>
            </div>
        </div>

    </div>
    <footer id="footer">
        <%- include('./shared/footer'); -%>
    </footer>
</body>

</html>